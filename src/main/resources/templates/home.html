<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Goalie</title>
</head>
<body>
<header layout:fragment="header">
    <section class="main_section">
        <nav>
            <div class="navlogo">
                <div data-aos="fade-right">
                    <img th:src="@{/images/logo.jpg}" alt="Goalie Logo">
                </div>
                <a th:href="@{/home}" data-aos="fade-down">Goalie</a>
            </div>
            <div class="nav_list" data-aos="zoom-in">
                <a th:href="@{/tournaments}">Tournaments</a>
                <a th:href="@{/faq}">FAQ</a>
                <a href="#footer">Contact Us</a>
                <a class="profile-pic" th:href="@{/profile_account}">
                    <div>
                        <img th:src="@{/images/profile.jpg}">
                    </div>
                    <h4 th:text="${user.name}"></h4>
                </a>
            </div>
        </nav>
    </section>
</header>
<main layout:fragment="content">
    <section class="home-modern">
        <!-- Hero Section with Mode Switcher -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="welcome-title">
                    Welcome back, <span th:text="${user.name}"></span>! ğŸ‘‹
                </h1>
                <p class="welcome-subtitle">Choose your mode to get started</p>
                
                <!-- Mode Switcher -->
                <div class="mode-switcher">
                    <form method="post" th:action="@{/switch-mode}" class="mode-form">
                        <div class="mode-toggle">
                            <button type="submit" name="mode" value="user" 
                                    th:class="${currentMode == 'user' ? 'mode-btn active' : 'mode-btn'}"
                                    th:disabled="${currentMode == 'user'}">
                                <span class="mode-icon">ğŸ‘¤</span>
                                <span class="mode-label">User Mode</span>
                                <span class="mode-desc">Organize & Manage</span>
                            </button>
                            <button type="submit" name="mode" value="player" 
                                    th:class="${currentMode == 'player' ? 'mode-btn active' : 'mode-btn'}"
                                    th:disabled="${currentMode == 'player'}">
                                <span class="mode-icon">âš½</span>
                                <span class="mode-label">Player Mode</span>
                                <span class="mode-desc">Play & Compete</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-dashboard">
            <div class="stat-card">
                <div class="stat-icon">ğŸ†</div>
                <div class="stat-content">
                    <h3 th:text="${tournamentCount}">0</h3>
                    <p>Tournaments</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âš½</div>
                <div class="stat-content">
                    <h3>0</h3>
                    <p>Matches</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-content">
                    <h3>0</h3>
                    <p>Teams</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-content">
                    <h3>0</h3>
                    <p>Ranking</p>
                </div>
            </div>
        </div>

        <!-- Action Cards Based on Mode -->
        <div class="action-section" th:if="${currentMode == 'user'}">
            <h2 class="section-title">Organizer Dashboard</h2>
            <div class="action-grid">
                <a th:href="@{/tournaments/create}" class="action-card create-tournament">
                    <div class="card-icon">â•</div>
                    <h3>Create Tournament</h3>
                    <p>Schedule and organize a new tournament</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a th:href="@{/tournaments}" class="action-card view-tournaments">
                    <div class="card-icon">ğŸ†</div>
                    <h3>View Tournaments</h3>
                    <p>Browse all active and upcoming tournaments</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a th:href="@{/tournaments}" class="action-card create-team">
                    <div class="card-icon">ğŸ‘¥</div>
                    <h3>Create Team</h3>
                    <p>Create teams for your tournaments</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a href="#" class="action-card analytics">
                    <div class="card-icon">ğŸ“Š</div>
                    <h3>Analytics</h3>
                    <p>View statistics and insights</p>
                    <span class="card-arrow">â†’</span>
                </a>
            </div>
        </div>

        <div class="action-section" th:if="${currentMode == 'player'}">
            <h2 class="section-title">Player Dashboard</h2>
            <div class="action-grid">
                <a th:href="@{/tournaments}" class="action-card join-tournament">
                    <div class="card-icon">ğŸ¯</div>
                    <h3>Join Tournament</h3>
                    <p>Browse and join available tournaments</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a th:href="@{/tournaments/create}" class="action-card create-tournament">
                    <div class="card-icon">â•</div>
                    <h3>Create Tournament</h3>
                    <p>Organize and schedule your own tournament</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a th:href="@{/tournaments}" class="action-card create-team">
                    <div class="card-icon">ğŸ‘¥</div>
                    <h3>Create Team</h3>
                    <p>Select a tournament and create your team</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a href="#" class="action-card my-teams">
                    <div class="card-icon">ğŸƒ</div>
                    <h3>My Teams</h3>
                    <p>View and manage your teams</p>
                    <span class="card-arrow">â†’</span>
                </a>
                <a href="#" class="action-card leaderboard">
                    <div class="card-icon">ğŸ…</div>
                    <h3>Leaderboard</h3>
                    <p>Check rankings and your position</p>
                    <span class="card-arrow">â†’</span>
                </a>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h2 class="section-title">Quick Actions</h2>
            <div class="quick-action-buttons">
                <a th:href="@{/profile_account}" class="quick-btn">
                    <span>âš™ï¸</span> Profile Settings
                </a>
                <a th:href="@{/tournaments}" class="quick-btn">
                    <span>ğŸ”</span> Browse Tournaments
                </a>
                <a href="#" class="quick-btn">
                    <span>ğŸ’¬</span> Messages
                </a>
                <a href="#" class="quick-btn">
                    <span>ğŸ””</span> Notifications
                </a>
            </div>
        </div>
    </section>
</main>

<!-- Player Setup Modal -->
<div th:if="${showPlayerSetup}" id="playerSetupModal" class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <h2>Welcome to Player Mode! ğŸ®</h2>
            <p>Let's set up your player profile to get started</p>
        </div>
        <form id="playerProfileForm" method="post" th:action="@{/setup-player-profile}" class="modal-form">
            <div class="form-group">
                <label for="playerNickname">Player Nickname *</label>
                <input type="text" id="playerNickname" name="playerNickname" 
                       placeholder="Enter your player nickname" required>
            </div>
            
            <div class="form-group">
                <label>Skill Level *</label>
                <div class="star-rating">
                    <input type="radio" id="star5" name="skillRating" value="5" required>
                    <label for="star5" class="star">â˜…</label>
                    <input type="radio" id="star4" name="skillRating" value="4">
                    <label for="star4" class="star">â˜…</label>
                    <input type="radio" id="star3" name="skillRating" value="3">
                    <label for="star3" class="star">â˜…</label>
                    <input type="radio" id="star2" name="skillRating" value="2">
                    <label for="star2" class="star">â˜…</label>
                    <input type="radio" id="star1" name="skillRating" value="1">
                    <label for="star1" class="star">â˜…</label>
                </div>
                <span class="rating-text">Select your skill level</span>
            </div>
            
            <div class="form-group">
                <label for="preferredPosition">Preferred Position</label>
                <select id="preferredPosition" name="preferredPosition" class="form-select">
                    <option value="">Select position</option>
                    <option value="GOALKEEPER">Goalkeeper</option>
                    <option value="DEFENDER">Defender</option>
                    <option value="MIDFIELDER">Midfielder</option>
                    <option value="FORWARD">Forward</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="dominantFoot">Dominant Foot</label>
                <select id="dominantFoot" name="dominantFoot" class="form-select">
                    <option value="">Select foot</option>
                    <option value="LEFT">Left</option>
                    <option value="RIGHT">Right</option>
                    <option value="BOTH">Both</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="bio">Bio (Optional)</label>
                <textarea id="bio" name="bio" rows="3" 
                          placeholder="Tell us about yourself as a player..."></textarea>
            </div>
            
            <div class="modal-actions">
                <button type="submit" class="btn-primary">Complete Setup</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Star Rating Interaction
    document.addEventListener('DOMContentLoaded', function() {
        const stars = document.querySelectorAll('.star-rating input[type="radio"]');
        const ratingText = document.querySelector('.rating-text');
        const ratingLabels = {
            1: 'Beginner',
            2: 'Novice',
            3: 'Intermediate',
            4: 'Advanced',
            5: 'Expert'
        };
        
        stars.forEach(star => {
            star.addEventListener('change', function() {
                const value = parseInt(this.value);
                const ratingText = document.querySelector('.rating-text');
                if (ratingText) {
                    ratingText.textContent = ratingLabels[value] || 'Select your skill level';
                    ratingText.style.color = 'var(--accent)';
                }
            });
        });
        
        // Show modal with animation
        const modal = document.getElementById('playerSetupModal');
        if (modal) {
            setTimeout(() => {
                modal.classList.add('show');
            }, 100);
        }
    });
</script>
</body>
</html>