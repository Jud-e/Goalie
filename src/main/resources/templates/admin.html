<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goalie Admin Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background: #f4f5f7; scroll-behavior: smooth; }
        .sidebar {
            height: 100vh;
            background: #1f1f2e;
            padding-top: 20px;
            color: #ccc;
        }
        .sidebar a {
            display: block;
            padding: 12px 20px;
            color: #ccc;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #34344a;
            color: #fff;
        }
        .card { border-radius: 12px; }
        .status-active { color: green; font-weight: bold; }
        .status-injured { color: red; font-weight: bold; }
        .status-suspended { color: orange; font-weight: bold; }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row">

        <!-- Sidebar -->
        <div class="col-2 sidebar">
            <h4 class="text-center text-white mb-4">ADMIN PANEL</h4>
            <a href="#usersSection" onclick="showSection('usersSection', 'btnUsers')">Dashboard</a>
            <a href="#usersSection" onclick="showSection('usersSection', 'btnUsers')">User Management</a>
            <a href="#tournamentsSection" onclick="showSection('tournamentsSection', 'btnTournaments')">Tournament Management</a>
            <a href="#teamsSection" onclick="showSection('teamsSection', 'btnTeams')">Teams & Players</a>
            <a href="#adsSection" onclick="showSection('adsSection', 'btnAds')">Advertisements</a>
            <a href="/logout">Logout</a>
        </div>

        <!-- Main Section -->
        <div class="col-10">

            <!-- Header -->
            <div class="p-3 bg-white shadow-sm mb-4">
                <h3>Goalie Admin Dashboard</h3>
            </div>

            <!-- Summary Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card p-3 shadow-sm">
                        <h6>Total Users</h6>
                        <h3 th:text="${users.size()}">0</h3>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 shadow-sm">
                        <h6>Active Tournaments</h6>
                        <h3 th:text="${tournaments.size()}">0</h3>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 shadow-sm">
                        <h6>Teams</h6>
                        <h3 th:text="${teams.size()}">0</h3>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card p-3 shadow-sm">
                        <h6>Advertisements</h6>
                        <h3 th:text="${ads.size()}">0</h3>
                    </div>
                </div>
            </div>

            <!-- SECTION BUTTONS -->
            <div class="d-flex gap-3 mb-4">
                <button id="btnUsers" class="btn btn-outline-dark" onclick="showSection('usersSection', 'btnUsers')">üë§ Users</button>
                <button id="btnTournaments" class="btn btn-outline-dark" onclick="showSection('tournamentsSection', 'btnTournaments')">üèÜ Tournaments</button>
                <button id="btnTeams" class="btn btn-outline-dark" onclick="showSection('teamsSection', 'btnTeams')">‚öΩ Teams & Players</button>
                <button id="btnAds" class="btn btn-outline-dark" onclick="showSection('adsSection', 'btnAds')">üì¢ Advertisements</button>
            </div>

            <!-- USERS TABLE -->
            <div id="usersSection">
                <div class="card p-3 shadow-sm mb-4">
                    <h5>User Accounts</h5>
                    <table class="table table-hover mt-3">
                        <thead class="table-dark">
                        <tr>
                            <th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="user : ${users}">
                            <td th:text="${user.id}">ID</td>
                            <td th:text="${user.name}">Name</td>
                            <td th:text="${user.email}">Email</td>
                            <td th:text="${user.role}">Role</td>
                            <td th:text="${user.status}"
                                th:classappend="${user.status == 'Active'} ? ' status-active' :
                                                (${user.status == 'Suspended'} ? ' status-suspended' : ' status-injured')">Status</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- TOURNAMENTS TABLE -->
            <div id="tournamentsSection" style="display:none;">
                <div class="card p-3 shadow-sm mb-4">
                    <h5>Tournaments</h5>
                    <table class="table table-hover mt-3">
                        <thead class="table-dark">
                        <tr>
                            <th>ID</th><th>Name</th><th>Created By</th><th>Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="tournament : ${tournaments}">
                            <td th:text="${tournament.id}">ID</td>
                            <td th:text="${tournament.name}">Name</td>
                            <td th:text="${tournament.organizer.name}">Created By</td>
                            <td th:text="${tournament.status}"
                                th:classappend="${tournament.status == 'Ongoing'} ? ' status-active' :
                                                (${tournament.status == 'Completed'} ? ' status-injured' : ' status-suspended')">Status</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- TEAMS & PLAYERS TABLE -->
            <div id="teamsSection" style="display:none;">
                <div class="card p-3 shadow-sm mb-4">
                    <h5>Teams & Players</h5>
                    <table class="table table-hover mt-3">
                        <thead class="table-dark">
                        <tr>
                            <th>Team</th><th>Player Name</th><th>Position</th><th>Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="team : ${teams}">
                            <td th:text="${team.name}" rowspan="${#lists.size(players.?[teamPlayersMap[team.id]])}">Team Name</td>
                            <td th:each="pt : ${teamPlayersMap[team.id]}" th:text="${pt.player.name}">Player Name</td>
                            <td th:each="pt : ${teamPlayersMap[team.id]}" th:text="${pt.position}">Position</td>
                            <td th:each="pt : ${teamPlayersMap[team.id]}" th:text="${pt.status}"
                                th:classappend="${pt.status == 'Active'} ? ' status-active' :
                                                (${pt.status == 'Suspended'} ? ' status-suspended' : ' status-injured')">Status</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ADS TABLE -->
            <div id="adsSection" style="display:none;">
                <div class="card p-3 shadow-sm mb-4">
                    <h5>Advertisements</h5>
                    <table class="table table-hover mt-3">
                        <thead class="table-dark">
                        <tr>
                            <th>Ad ID</th><th>Title</th><th>Status</th><th>Clicks</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="ad : ${ads}">
                            <td th:text="${ad.id}">ID</td>
                            <td th:text="${ad.title}">Title</td>
                            <td th:text="${ad.status}"
                                th:classappend="${ad.status == 'Active'} ? ' status-active' : ' status-injured'">Status</td>
                            <td th:text="${ad.clicks}">Clicks</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script>
    function showSection(sectionId, buttonId) {
        const sections = ['usersSection', 'tournamentsSection', 'teamsSection', 'adsSection'];
        const buttons  = ['btnUsers', 'btnTournaments', 'btnTeams', 'btnAds'];

        sections.forEach(id => {
            document.getElementById(id).style.display = (id === sectionId) ? 'block' : 'none';
        });

        buttons.forEach(id => {
            const btn = document.getElementById(id);
            if (id === buttonId) {
                btn.classList.remove('btn-outline-dark');
                btn.classList.add('btn-dark');
            } else {
                btn.classList.remove('btn-dark');
                btn.classList.add('btn-outline-dark');
            }
        });
    }

    // Show users section by default
    showSection('usersSection', 'btnUsers');
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
